---
title: "代理式编程 (Agentic Coding) 简介"
url: "https://claude.com/blog/introduction-to-agentic-coding"
---

# 代理式编程 (Agentic Coding) 简介

在过去几年中，AI 辅助编程发展迅速。曾经只是建议下一行代码的工具，现在可以通过分析代码中的模式来预测整个函数。

最新的演进更进一步：这些系统不再只是预测你接下来要输入什么，而是通过读取代码库中的文件、运行测试并迭代直到目标完成，来自主执行多步骤的开发任务。

## 什么是代理式编程？

代理式编程将 AI 从自动补全工具转变为自主任务执行者。传统的编程助手等待你输入每一行代码，然后建议接下来的内容。代理式系统接受一个高级目标，将其分解为离散的步骤，独立执行这些步骤，并根据环境的反馈调整其方法。

关键的区别在于自主性和范围。传统的 AI 工具分析编辑器中可见的代码并建议下一个片段。代理式编程工具读取整个代码库，理解目录间的文件关系，执行命令以验证更改是否有效，并迭代直到测试通过且满足要求。这种自主性延伸到整个开发周期，每一步都在无需你手动编排工作流的情况下发生。

## AI 编程工具是如何演变的

### 代码预测和补全

像 IDE 自动补全扩展这样的工具通过分析编辑器中可见的代码来预测你接下来可能输入的内容。这些系统擅长处理重复性模式，如生成 REST 端点样板代码、遵循既定约定创建测试结构以及实现常见算法。

预测模型考虑你的直接上下文。当你编写函数签名时，工具会根据函数名称、参数类型和周围代码建议实现。当你开始输入 import 语句时，它会根据已导入的内容和常见用法模式推荐包。

局限性在于范围。自动补全工具使用有限的上下文窗口工作，通常仅分析当前文件或少量附近的文件。它们无法跟踪应用程序架构中的数据流，也无法理解一项服务中的更改如何影响依赖服务。

### 对话式 AI 聊天界面

像 Claude.ai 这样基于浏览器的编程助手为 AI 编程工具添加了对话能力。这些工具不是在你输入时建议代码，而是通过分析粘贴的片段、错误描述和优化问题，就你的代码问题进行对话。

这些界面擅长分析和指导。粘贴一个慢速数据库查询以获得优化建议。描述一个架构决策以获得权衡分析。分享一条错误消息以探索故障排除方法。

对话格式支持迭代改进。你提出一个一般性问题，收到初步答复，根据该答复澄清你的要求，并逐步缩小到具体的解决方案。当问题没有完全定义，或者你需要在致力于实施之前探索不同的方法时，这种来回交流效果很好。

但这对于涉及多个文件的任务来说变得不切实际。重构一个被另外三十个文件导入的模块意味着将每个文件粘贴到聊天中，手动跟踪哪些文件需要更新，将建议的更改复制回每个文件，并确保所有修改的一致性。聊天界面提供指导，但编排实施仍然是手动的。这就是代理式编程系统旨在填补的空白。

## 代理式编程是如何工作的

### 上下文收集和规划

代理式编程系统在项目级别而不是文件级别上运行。当你提供一个目标时，系统会通过读取配置文件来了解你的项目设置，检查测试文件以查看现有的覆盖模式，并跟踪导入以映射模块之间的依赖关系，从而分析完成目标所需的相关上下文。

然后，系统创建一个完成目标的计划。这不是一个静态列表，而是一个随着系统收集更多信息而演变的自适应方法。如果你的目标是“向 API 添加身份验证”，计划可能从分析现有的路由定义开始，确定哪些端点需要保护，检查身份验证中间件是否已经存在，并确定应该在哪里实施用户会话管理。

### 实施和协调

实施阶段涉及读取和写入代码库中的文件。与建议单个文件内更改的自动补全工具不同，代理式系统修改多个相关文件以保持一致性。添加身份验证可能需要更新路由处理程序、创建中间件函数、修改数据库架构、调整 API 客户端代码、更新文档并在所有这些更改中添加测试覆盖。

这种自主工作流将开发从“编写代码、运行测试、读取错误、修复代码、重复”转变为“定义目标、审查建议的更改、批准实施”。你通过审查计划和批准文件更改来保持控制，而系统处理迭代调试循环、对现有代码模式的研究以及跨多个文件更改的协调。

## 使用 Claude Code 进行代理式编程

[**Claude Code**](https://claude.com/product/claude-code) 将代理能力带到了你的终端环境中。与需要不断复制还是基于浏览器的工具或仅分析可见文件的 IDE 扩展不同，Claude Code 直接在你的项目目录中运行，并具有对代码库的完全访问权限。

### 安装和启动

在终端中安装 Claude Code：

```bash
npm install -g @anthropic-ai/claude-code
```

然后在你的项目目录中启动它以开始编程：

```bash
claude
```

### Claude Code 是如何工作的

Claude Code 会根据请求读取你的整个项目上下文。当你询问架构或请求更改时，它会分析文件结构，理解 package.json 或 requirements.txt 中声明的依赖关系，跟踪模块如何交互，并识别代码库中已建立的现有模式。

多文件操作变得简单明了。请求“重构此基于回调的代码以使用 async/await”，Claude Code 会识别使用回调模式的所有文件，使用 async/await 语法更新每个文件，修改错误处理以使用 try/catch 块，更新相关测试以处理异步模式，并验证你的整个测试套件仍然通过。

### 文件系统访问和权限

文件系统访问使得基于 Web 的工具无法处理的工作流成为可能。Claude Code 使用适当的命名约定创建新文件，将代码组织成逻辑目录结构，在添加依赖项时更新配置文件，并与现有的项目组织模式保持一致。

权限模型确保你保持控制。默认情况下，Claude Code 在修改文件之前会请求批准，并准确显示它计划进行的更改。你审查建议的修改，批准你同意的更改，并要求对不符合要求的更改进行修订。

### 与开发工作流集成

与开发工作流的集成意味着 Claude Code 可以与你已经在使用的工具交互。它运行 npm 命令来安装依赖项，执行 Jest 或 pytest 等测试运行器，使用 Git 进行提交和分支，并启动开发服务器以验证更改在运行中的应用程序中是否有效。

你可以通过连接模型上下文协议 (MCP) 服务器进一步扩展这些功能，这为 Claude Code 提供了来自开发环境中其他工具和系统的全面上下文。

## 现实世界的应用

### 乐天 (Rakuten) 的七小时自主实施

[乐天 (Rakuten)](https://www.claude.com/customers/rakuten) 的工程团队挑战了 Claude Code 的代理能力，要求在 vLLM（一个包含 1250 万行代码的开源库，涵盖 Python、C++ 和 CUDA）中实施特定的激活向量提取方法。Claude Code 在七小时的持续自主工作中完成了整个实施。

> "在那七个小时里，我没有写任何代码，我只是提供了偶尔的指导"
>
> \- Kenta Naruse，乐天机器学习工程师

最终实施与参考方法相比达到了 99.9% 的数值准确率，展示了系统理解复杂的多语言代码库、规划复杂算法的实施方法以及交付生产级结果的能力。

**乐天的转型指标：**

*   功能交付速度提高 **79%**（24 天 → 5 天）
*   **7 小时** 自主实施，只需极少的人工干预
*   复杂算法重构的准确率达到 **99.9%**
*   工程团队的并行任务执行能力提高 **5 倍**

正如乐天商业 AI 总经理 Yusuke Kaji 解释的那样：“你可以通过将四个任务委托给 Claude Code，同时专注于剩余的一个任务，让五个任务并行运行。”

## 开始使用 Claude Code

使用 npm 安装 [Claude Code](https://claude.com/product/claude-code) 后，导航到项目目录并启动会话：

```bash
claude
```

尝试几个不同的任务，看看 Claude Code 如何理解你的代码库。

### 理解项目架构

```bash
解释这个代码库的结构以及主要组件是如何交互的
```

Claude Code 读取你的文件并提供架构概览，帮助你或新团队成员理解项目组织。

### 分析代码质量

```bash
审查认证模块的潜在安全问题
```

Claude Code 检查相关代码，识别诸如暴露凭据或验证不足等问题，并提出具体的改进建议。

### 调试和修复错误

```bash
在我们 GraphQL 解析器中找到所有的 N+1 查询问题并实现 DataLoader 批处理
```

Claude Code 分析你的整个代码库，识别导致 N+1 问题的特定 ORM 模式，并实施修复。

## 慢慢开始，然后扩展

随着你使用 Claude Code，你会对哪些任务最能从自主执行中受益，以及哪些任务最好用传统开发工具处理产生直觉。一些提供快速胜利的直接应用包括：

*   针对未覆盖代码路径的 **测试自动化**
*   针对遗留系统的 **文档生成**
*   针对技术债务的 **常规重构**
*   针对容易理解的需求的 **功能实施**

每一次互动都提供了一个机会，让你了解 Claude Code 如何在你特定的代码库中解决问题。开始使用 [Claude Code](https://claude.com/product/claude-code) 或访问我们的 [文档](https://docs.claude.com/en/docs/claude-code/overview) 以了解更多信息。
